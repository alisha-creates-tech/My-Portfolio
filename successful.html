<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Successful Projects</title>
    <link rel="stylesheet" href="style.css">
</head>
<audio id="myAudio" src="music.mp3"></audio>
    <div id="music-status" class="music-icon">
    ðŸŽµ
</div>
<body>
  <header>
        <nav>
    <button class="navB"><a href="index.html">Home</a></button>
    <button class="navB"><a href="disaster.html">Disasters</a></button>
    <button class="navB"><a href="successful.html">Successful Projects</a></button>
        </nav>
            <h1 class="blob">My Miracles</h1>
    </header>
    <main></main>
</body>
</html>
<script>
  const audio = document.getElementById('myAudio');
const musicIcon = document.getElementById('music-status');

window.addEventListener('load', () => {
    const isPlaying = localStorage.getItem('musicPlaying') === 'true';
    const savedTime = localStorage.getItem('musicTime');

    if (savedTime) audio.currentTime = parseFloat(savedTime);
    
    if (isPlaying) {
        audio.play().then(() => updateUI(true)).catch(() => updateUI(false));
    }
});

setInterval(() => {
    if (!audio.paused) {
        localStorage.setItem('musicTime', audio.currentTime);
    }
}, 1000);

function updateUI(playing) {
    if (playing) {
        musicIcon.innerText = "ðŸŽ¶";
        musicIcon.style.animation = "pulse 1.5s infinite";
    } else {
        musicIcon.innerText = "ðŸŽµ";
        musicIcon.style.animation = "none";
    }
}

function toggleMusic() {
    if (audio.paused) {
        audio.play();
        localStorage.setItem('musicPlaying', 'true');
        updateUI(true);
    } else {
        audio.pause();
        localStorage.setItem('musicPlaying', 'false');
        updateUI(false);
    }
}

musicIcon.addEventListener('click', toggleMusic);

</script>